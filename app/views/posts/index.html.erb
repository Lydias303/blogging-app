<div class="row">
  <div class="col-md-10 col-md-offset-1">
    <h2>Blog Posts</h2>
    <table id="post-table" class="table table-striped table-bordered" cellspacing="0" width="100%">
      <thead>
        <tr>
          <th>Title</th>
          <th>Author</th>
          <th>Body</th>
          <th>Number of Comments</th>
          <th>Tags</th>
        </tr>
      </thead>
      <tbody>
        <% @posts.each do |post| %>
          <tr>
            <td class="title"><%= link_to post.title, post_path(post) %></td>
            <td class="post-body"><%= markdown(post.body).html_safe %></td>
            <td class="author"><%= post.author %></td>
            <td><%= post.comments.count %></td>
            <td><%= post.tags.first %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <div class="post-form">
      <%= bootstrap_form_for(@post) do |f| %>
        <%= f.text_field :title %>
        <%= f.text_field :author %>
        <%= f.text_area  :body %>
        <%= f.file_field :avatar %>
        <%= f.select :tags, Tag.all.collect { |p| [p.name, p.id] }, {}, { multiple: true } %>
        <%= f.submit "New Post" %>
      <% end %>
    </div>
  </div>
</div>
